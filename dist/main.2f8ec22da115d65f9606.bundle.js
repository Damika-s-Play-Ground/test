(()=>{"use strict";var e,t,n,i,l=[],a=null,s=null,d=-1,r=1,c=0,o=-1;function u(){var e=document.querySelector("#pagination");if(d=-1,v(),l.length>0)if(innerWidth<992&&-1===d)d=6;else{f(0,1);var t=i.tBodies[0].rows[0].getBoundingClientRect().top,n=i.tBodies[0].rows[0].clientHeight,a=e.clientHeight,s=1;do{var u=t+n*s+a+40;s++}while(u<document.querySelector("footer").getBoundingClientRect().top);d=s-2,v()}(r=-1===d?1:Math.ceil(l.length/d))>1?e.classList.remove("hidden"):e.classList.add("hidden"),-1===o&&(c=(o=r)-(o%3==0?3:o%3));var m='<li class="page-item" id="btn-backward">           <a class="page-link" href="#"><i class="fas fa-backward"></i></a>       </li>';for(s=0;s<r;s++)m+=s>=c&&s<=o?'<li class="page-item"><a class="page-link" href="#">'+(s+1)+"</a></li>":'<li class="page-item d-none"><a class="page-link" href="#">'+(s+1)+"</a></li>";m+='<li class="page-item" id="btn-forward">          <a class="page-link" href="#"><i class="fas fa-forward"></i></a>    </li>',document.querySelector(".pagination").innerHTML=m,o=-1}function m(e){if(e){e<1&&(e=1),e>r&&(e=r);var t=document.querySelector("#pagination .page-item.active");null!==t&&t.classList.remove("active"),document.querySelector(".pagination li:nth-child("+(e+1)+")").classList.add("active"),function(e){1==e?document.querySelector("#btn-backward").classList.add("disabled"):document.querySelector("#btn-backward").classList.remove("disabled"),e==r?document.querySelector("#btn-forward").classList.add("disabled"):document.querySelector("#btn-forward").classList.remove("disabled")}(e),v(),f((e-1)*d,e*d)}}function v(){for(var e=i.tBodies[0].rows.length-1;e>=0;e--)i.tBodies[0].deleteRow(e)}function f(e,t){t>l.length&&(t=l.length);for(var n=e;n<t;n++){var a=i.tBodies.item(0).insertRow(-1);a.onclick=g,a.insertCell(0).innerText=l[n].id,a.insertCell(1).innerText=l[n].name,a.insertCell(2).innerText=l[n].address,a.insertCell(3).innerHTML='<div class="trash"></div>'}document.querySelectorAll(".trash").forEach((function(e){e.addEventListener("click",handleDelete)}))}function g(i){!function(){for(var t=document.querySelectorAll("#tbl-customers tbody tr"),n=0;n<t.length;n++)t[n].classList.remove("selected");e.disabled=!1,s=null,a=null}(),(s=i.target.parentElement).classList.add("selected"),e.value=s.cells[0].innerText,e.disabled=!0,t.value=s.cells[1].innerText,n.value=s.cells[2].innerText,a=l.find((function(e){return e.id===s.cells[0].innerText}))}function h(){i.tBodies.item(0).rows.length>0?document.querySelector("#tbl-customers tfoot").classList.add("d-none"):document.querySelector("#tbl-customers tfoot").classList.remove("d-none")}function p(e){this.classList.remove("is-invalid")}e=document.getElementById("txt-id"),t=document.getElementById("txt-name"),n=document.getElementById("txt-address"),i=document.getElementById("tbl-customers"),e.focus(),document.getElementById("btn-save").addEventListener("click",(function(i){var r;(r=!0,e.classList.remove("is-invalid"),t.classList.remove("is-invalid"),n.classList.remove("is-invalid"),n.value.trim().length<3&&(n.classList.add("is-invalid"),n.select(),r=!1),/^[A-Za-z][A-Za-z .]{3,}$/.test(t.value)||(t.classList.add("is-invalid"),t.select(),r=!1),/^C\d{3}$/.test(e.value)||(e.classList.add("is-invalid"),document.getElementById("helper-txt-id").classList.remove("text-muted"),document.getElementById("helper-txt-id").classList.add("invalid-feedback"),e.select(),r=!1),-1!==l.findIndex((function(t){return t.id===e.value}))&&(alert("Duplicate Customer IDs are not allowed"),e.classList.add("is-invalid"),document.getElementById("helper-txt-id").classList.remove("text-muted"),document.getElementById("helper-txt-id").classList.add("invalid-feedback"),e.select(),r=!1),r)&&(a?(a.name=t.value,a.address=n.value,s.cells[1].innerText=t.value,s.cells[2].innerText=n.value):(l.push({id:e.value,name:t.value,address:n.value}),u(),m(Math.ceil(l.length/d)),h(),e.value="",t.value="",n.value="",e.focus()))})),document.addEventListener("click",(function(e){var t;e.target&&(e.target.matches("#btn-backward *")?(t=c,(c=(o=c-1)-2)<0&&(t=1,o=2+(c=0)),u(),m(t)):e.target.matches("#btn-forward *")?(t=(c+=3)+1,o=c+2,c>r&&(o=-1,t=r),u(),m(t)):e.target.matches("li.page-item *")&&m(+e.target.innerText))})),e.addEventListener("input",p),t.addEventListener("input",p),n.addEventListener("input",p),window.handleDelete=function(e){if(confirm("Are you sure whether you want to delete this customer?")){l.splice(l.findIndex((function(t){return t.id===e.target.parentElement.parentElement.cells[0].innerText})),1);var t=+document.querySelector(".pagination .active").innerText;u(),m(t||1),h()}e.stopPropagation()}})();